# å‹•æ…‹è¡›æ˜Ÿ SDN ç¶²è·¯æ¨¡æ“¬å™¨

é€™æ˜¯ä¸€å€‹åŸºæ–¼ Python é–‹ç™¼çš„å‹•æ…‹è¡›æ˜Ÿ SDN ç¶²è·¯æ¨¡æ“¬å™¨ï¼Œæ•´åˆäº† Mininetã€Ryu æ§åˆ¶å™¨å’Œè‡ªå®šç¾©çš„è¡›æ˜Ÿè»Œé“æ¨¡æ“¬åŠŸèƒ½ã€‚

## ğŸ“‹ ç³»çµ±æ¶æ§‹

```
[Ryu Controller]
        |
 -------------------------------
|              |               |
[SAT1]       [SAT2]         [SAT3]   â† æ¯é¡†éƒ½æ˜¯ SDN Switch
   |             |              |
[GS1]         [GS2]         [GS3]    â† åœ°é¢ç«™ Host or Router
```

éš¨æ™‚é–“é€²è¡Œï¼š
- SAT2 é›¢é–‹ â†’ ç§»é™¤ SAT2
- SAT4 é€²å…¥ â†’ åŠ å…¥ SAT4ï¼Œå»ºç«‹ link åˆ°å¯è¦‹åœ°é¢ç«™

## ğŸš€ ä¸»è¦åŠŸèƒ½

### 1. å‹•æ…‹æ‹“æ’²ç®¡ç†
- **è¡›æ˜Ÿè»Œé“æ¨¡æ“¬**: åŸºæ–¼ç°¡åŒ–çš„ LEO è»Œé“æ¨¡å‹
- **å‹•æ…‹é€£æ¥ç®¡ç†**: æ ¹æ“šè¡›æ˜Ÿä½ç½®è‡ªå‹•å»ºç«‹/æ–·é–‹èˆ‡åœ°é¢ç«™çš„é€£æ¥
- **å¯¦æ™‚æ‹“æ’²æ›´æ–°**: æ”¯æ´è¡›æ˜Ÿçš„å‹•æ…‹åŠ å…¥å’Œé›¢é–‹

### 2. SDN æ§åˆ¶å™¨
- **æ™ºèƒ½è·¯ç”±**: æ”¯æ´æœ€çŸ­è·¯å¾‘ã€è² è¼‰å¹³è¡¡ã€å»¶é²æœ€å„ªç­‰è·¯ç”±ç®—æ³•
- **æ‹“æ’²æ„ŸçŸ¥**: è‡ªå‹•æ„ŸçŸ¥ç¶²è·¯æ‹“æ’²è®ŠåŒ–ä¸¦æ›´æ–°è·¯ç”±
- **æµè¡¨ç®¡ç†**: å‹•æ…‹å®‰è£å’Œæ¸…ç†æµè¡¨é …

### 3. æµé‡æ¨¡æ“¬èˆ‡æ¸¬è©¦
- **å¤šç¨®æµé‡æ¨¡å¼**: æ”¯æ´ ping æ¸¬è©¦ã€iperf ååé‡æ¸¬è©¦ã€è¦–é »æµæ¨¡æ“¬ç­‰
- **æ€§èƒ½ç›£æ§**: æŒçºŒç›£æ§ç¶²è·¯é€£é€šæ€§å’Œæ€§èƒ½æŒ‡æ¨™
- **æ•…éšœæ¨¡æ“¬**: æ¸¬è©¦è¡›æ˜Ÿåˆ‡æ›å’Œæ•…éšœæ¢å¾©èƒ½åŠ›

## ğŸ“ æª”æ¡ˆçµæ§‹

```
.
â”œâ”€â”€ satellite_sdn_simulator.py      # ä¸»è¦çš„è¡›æ˜Ÿæ‹“æ’²æ¨¡æ“¬å™¨
â”œâ”€â”€ satellite_sdn_controller.py     # Ryu SDN æ§åˆ¶å™¨
â”œâ”€â”€ traffic_simulator.py            # æµé‡æ¨¡æ“¬å™¨
â”œâ”€â”€ run_satellite_simulation.py     # ä¸»å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ leo_config.yaml                 # è¡›æ˜Ÿç¶²è·¯é…ç½®æª”æ¡ˆ
â””â”€â”€ SATELLITE_SDN_README.md         # é€™å€‹æ–‡æª”
```

## ğŸ›  å®‰è£èˆ‡è¨­å®š

### ç³»çµ±éœ€æ±‚
- Ubuntu 18.04+ æˆ–å…¶ä»– Linux ç™¼è¡Œç‰ˆ
- Python 3.7+
- Mininet
- Ryu æ§åˆ¶å™¨
- Open vSwitch

### å®‰è£æ­¥é©Ÿ

1. **å®‰è£ Mininet**
```bash
sudo apt-get update
sudo apt-get install mininet
```

2. **å®‰è£ Ryu æ§åˆ¶å™¨**
```bash
pip install ryu
```

3. **å®‰è£ Python ä¾è³´**
```bash
pip install pyyaml numpy matplotlib
```

4. **é©—è­‰å®‰è£**
```bash
# æ¸¬è©¦ Mininet
sudo mn --test pingall

# æ¸¬è©¦ Ryu
ryu-manager --version
```

### é…ç½®ä¿®æ”¹

ä¿®æ”¹ `leo_config.yaml` ä¸­çš„æ§åˆ¶å™¨ IP åœ°å€ï¼š

```yaml
controller:
  ip: "127.0.0.1"  # æ”¹ç‚ºæ‚¨çš„æ§åˆ¶å™¨ IP
  port: 6653
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: å®Œæ•´å•Ÿå‹• (æ¨è–¦)

```bash
# å•Ÿå‹•å®Œæ•´æ¨¡æ“¬ç’°å¢ƒ
sudo python run_satellite_simulation.py

# å¸¶æ¼”ç¤ºçš„å•Ÿå‹•
sudo python run_satellite_simulation.py --demo

# è©³ç´°æ¨¡å¼
sudo python run_satellite_simulation.py --verbose
```

### æ–¹æ³• 2: åˆ†æ­¥å•Ÿå‹•

**çµ‚ç«¯ 1 - å•Ÿå‹•æ§åˆ¶å™¨**
```bash
python run_satellite_simulation.py --controller-only
```

**çµ‚ç«¯ 2 - å•Ÿå‹•æ‹“æ’²**
```bash
sudo python run_satellite_simulation.py --topology-only
```

### æ–¹æ³• 3: æ‰‹å‹•å•Ÿå‹•

**æ­¥é©Ÿ 1: å•Ÿå‹• Ryu æ§åˆ¶å™¨**
```bash
ryu-manager satellite_sdn_controller.py --verbose
```

**æ­¥é©Ÿ 2: å•Ÿå‹•æ‹“æ’²æ¨¡æ“¬å™¨**
```bash
sudo python satellite_sdn_simulator.py
```

## ğŸ¯ æ“ä½œæŒ‡å—

### åŸºæœ¬å‘½ä»¤

é€²å…¥ Mininet CLI å¾Œï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# åŸºæœ¬ Mininet å‘½ä»¤
mininet> pingall                    # æ¸¬è©¦æ‰€æœ‰ä¸»æ©Ÿé€£é€šæ€§
mininet> iperf gs_beijing gs_london # æ¸¬è©¦å…©å€‹åœ°é¢ç«™é–“çš„ååé‡
mininet> h1 ping h2                 # ç‰¹å®šä¸»æ©Ÿé–“ ping æ¸¬è©¦

# è¡›æ˜Ÿæ¨¡æ“¬å‘½ä»¤
mininet> simulate                   # é¡¯ç¤ºç•¶å‰è¡›æ˜Ÿç‹€æ…‹
mininet> add_satellite SAT4         # å‹•æ…‹æ·»åŠ è¡›æ˜Ÿ
mininet> remove_satellite SAT2      # ç§»é™¤è¡›æ˜Ÿ
mininet> status                     # é¡¯ç¤ºç³»çµ±ç‹€æ…‹

# æµé‡æ¸¬è©¦å‘½ä»¤
mininet> traffic                    # é€²å…¥æµé‡æ¸¬è©¦æ¨¡å¼
mininet> demo                       # åŸ·è¡Œå®Œæ•´æ¼”ç¤º
```

### æµé‡æ¸¬è©¦æ¨¡å¼

é€²å…¥æµé‡æ¸¬è©¦æ¨¡å¼å¾Œï¼š

```bash
# åˆ—å‡ºå¯ç”¨çš„æµé‡æ¨¡å¼
sim> list

# åŸ·è¡Œç‰¹å®šæµé‡æ¨¡å¼
sim> run basic_connectivity        # åŸºæœ¬é€£é€šæ€§æ¸¬è©¦
sim> run throughput_test           # ååé‡æ¸¬è©¦
sim> run video_streaming           # è¦–é »æµæ¸¬è©¦

# æ¸¬è©¦è¡›æ˜Ÿåˆ‡æ›
sim> handover                      # æ¸¬è©¦è¡›æ˜Ÿåˆ‡æ›æ€§èƒ½
sim> failure                       # æ¸¬è©¦æ•…éšœæ¢å¾©

# æŸ¥çœ‹çµæœ
sim> results                       # é¡¯ç¤ºæ¸¬è©¦çµæœæ‘˜è¦
sim> plot                          # ç¹ªè£½æ€§èƒ½åœ–è¡¨ (éœ€è¦ matplotlib)
```

## ğŸ“Š ç›£æ§èˆ‡åˆ†æ

### ç³»çµ±ç‹€æ…‹ç›£æ§

```bash
# æŸ¥çœ‹è¡›æ˜Ÿä½ç½®å’Œé€£æ¥ç‹€æ…‹
mininet> simulate

# æŸ¥çœ‹ç³»çµ±æ•´é«”ç‹€æ…‹
mininet> status
```

### æ€§èƒ½æŒ‡æ¨™

ç³»çµ±æœƒè‡ªå‹•æ”¶é›†ä»¥ä¸‹æ€§èƒ½æŒ‡æ¨™ï¼š
- **é€£é€šæ€§**: æ‰€æœ‰ä¸»æ©Ÿé–“çš„é€£é€šæˆåŠŸç‡
- **ååé‡**: å„é€£æ¥çš„æ•¸æ“šå‚³è¼¸é€Ÿç‡
- **å»¶é²**: ç«¯åˆ°ç«¯å»¶é²æ™‚é–“
- **åˆ‡æ›æ€§èƒ½**: è¡›æ˜Ÿåˆ‡æ›æ™‚çš„ä¸­æ–·æ™‚é–“

### çµæœè¦–è¦ºåŒ–

```bash
# åœ¨æµé‡æ¸¬è©¦æ¨¡å¼ä¸­
sim> plot
```

é€™æœƒç”ŸæˆåŒ…å«ä»¥ä¸‹åœ–è¡¨çš„æ–‡ä»¶ï¼š
1. ç¶²è·¯ååé‡éš¨æ™‚é–“è®ŠåŒ–
2. ç¶²è·¯é€£é€šæ€§éš¨æ™‚é–“è®ŠåŒ–  
3. ç¶²è·¯å»¶é²éš¨æ™‚é–“è®ŠåŒ–
4. è¡›æ˜Ÿåˆ‡æ›æˆåŠŸç‡

## ğŸ”§ é…ç½®èªªæ˜

### leo_config.yaml ä¸»è¦åƒæ•¸

```yaml
# ç¶²è·¯åŸºæœ¬åƒæ•¸
network:
  simulation_duration: 3600    # æ¨¡æ“¬æŒçºŒæ™‚é–“ï¼ˆç§’ï¼‰
  update_interval: 5           # æ›´æ–°é–“éš”ï¼ˆç§’ï¼‰

# è¡›æ˜Ÿåƒæ•¸
satellites:
  count: 12                    # è¡›æ˜Ÿæ•¸é‡
  altitude: 550                # è»Œé“é«˜åº¦ï¼ˆkmï¼‰
  inclination: 53              # è»Œé“å€¾è§’ï¼ˆåº¦ï¼‰

# åœ°é¢ç«™åƒæ•¸  
ground_stations:
  count: 6                     # åœ°é¢ç«™æ•¸é‡
  min_elevation_angle: 10      # æœ€å°ä»°è§’ï¼ˆåº¦ï¼‰
  
# æ§åˆ¶å™¨åƒæ•¸
controller:
  ip: "127.0.0.1"             # æ§åˆ¶å™¨ IP
  port: 6653                   # æ§åˆ¶å™¨ç«¯å£
```

## ğŸ“‹ æ¸¬è©¦è…³æœ¬

### è‡ªå‹•åŒ–æ¸¬è©¦ç¯„ä¾‹

```python
# åœ¨ Python ä¸­ä½¿ç”¨
from satellite_sdn_simulator import DynamicSatelliteTopology
from traffic_simulator import SatelliteTrafficSimulator

# å‰µå»ºæ‹“æ’²
topology = DynamicSatelliteTopology()
topology.start_simulation()

# å‰µå»ºæµé‡æ¨¡æ“¬å™¨
traffic_sim = SatelliteTrafficSimulator(topology)
traffic_sim.start_simulation()

# åŸ·è¡Œæ¸¬è©¦
result = traffic_sim.run_traffic_pattern("throughput_test")
handover_result = traffic_sim.test_satellite_handover()

# æŸ¥çœ‹çµæœ
traffic_sim.show_results()
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **æ§åˆ¶å™¨é€£æ¥å¤±æ•—**
   ```bash
   # æª¢æŸ¥ç«¯å£æ˜¯å¦è¢«ä½”ç”¨
   sudo netstat -tlnp | grep :6653
   
   # ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ IP åœ°å€
   # ç¢ºä¿æ§åˆ¶å™¨ IP å¯å¾ Mininet è¨ªå•
   ```

2. **æ¬Šé™å•é¡Œ**
   ```bash
   # ç¢ºä¿ä»¥ sudo æ¬Šé™é‹è¡Œ Mininet éƒ¨åˆ†
   sudo python run_satellite_simulation.py
   ```

3. **Python ä¾è³´å•é¡Œ**
   ```bash
   # å®‰è£ç¼ºå¤±çš„ä¾è³´
   pip install pyyaml numpy matplotlib
   ```

4. **Open vSwitch å•é¡Œ**
   ```bash
   # é‡å•Ÿ OVS æœå‹™
   sudo service openvswitch-switch restart
   ```

### èª¿è©¦æ¨¡å¼

```bash
# å•Ÿç”¨è©³ç´°æ—¥èªŒ
python run_satellite_simulation.py --verbose

# æª¢æŸ¥ Ryu æ—¥èªŒ
tail -f ryu.log
```

## ğŸ¯ é€²éšä½¿ç”¨

### è‡ªå®šç¾©è¡›æ˜Ÿè»Œé“

ä¿®æ”¹ `SatelliteOrbitSimulator` é¡ä¸­çš„è»Œé“è¨ˆç®—æ–¹æ³•ï¼š

```python
def get_satellite_position(self, satellite_id: str, time_offset: float):
    # å¯¦ç¾æ›´è¤‡é›œçš„è»Œé“æ¨¡å‹
    # ä¾‹å¦‚ï¼šè€ƒæ…®åœ°çƒè‡ªè½‰ã€è»Œé“æ”å‹•ç­‰
```

### è‡ªå®šç¾©è·¯ç”±ç®—æ³•

åœ¨ `SatelliteSDNController` ä¸­æ·»åŠ æ–°çš„è·¯ç”±ç®—æ³•ï¼š

```python
def _custom_routing_algorithm(self, src_dpid, dst_dpid):
    # å¯¦ç¾è‡ªå®šç¾©è·¯ç”±é‚è¼¯
    # ä¾‹å¦‚ï¼šåŸºæ–¼ QoS éœ€æ±‚çš„è·¯ç”±é¸æ“‡
```

### è‡ªå®šç¾©æµé‡æ¨¡å¼

åœ¨ `SatelliteTrafficSimulator` ä¸­æ·»åŠ æ–°çš„æµé‡æ¨¡å¼ï¼š

```python
def _run_custom_test(self, pattern: TrafficPattern):
    # å¯¦ç¾è‡ªå®šç¾©æµé‡æ¸¬è©¦
    # ä¾‹å¦‚ï¼šç‰©è¯ç¶²æµé‡ã€èªéŸ³é€šè©±æ¨¡æ“¬ç­‰
```

## ğŸ“ˆ å¯¦é©—å»ºè­°

### åŸºç¤å¯¦é©—

1. **éœæ…‹é€£é€šæ€§æ¸¬è©¦**: æ¸¬è©¦ä¸åŒåœ°é¢ç«™é–“çš„åŸºæœ¬é€£é€šæ€§
2. **å‹•æ…‹åˆ‡æ›æ¸¬è©¦**: è§€å¯Ÿè¡›æ˜Ÿåˆ‡æ›å°é€£é€šæ€§çš„å½±éŸ¿
3. **ååé‡åˆ†æ**: æ¯”è¼ƒä¸åŒè·¯ç”±ç®—æ³•çš„æ€§èƒ½

### é€²éšå¯¦é©—

1. **æ•…éšœæ¢å¾©èƒ½åŠ›**: æ¨¡æ“¬å¤šè¡›æ˜ŸåŒæ™‚æ•…éšœçš„æƒ…æ³
2. **è² è¼‰å¹³è¡¡æ•ˆæœ**: æ¸¬è©¦é«˜è² è¼‰ä¸‹çš„æµé‡åˆ†é…
3. **QoS ä¿è­‰**: æ¸¬è©¦ä¸åŒæœå‹™é¡å‹çš„æ€§èƒ½ä¿è­‰

### ç ”ç©¶æ–¹å‘

1. **æ™ºèƒ½è·¯ç”±**: åŸºæ–¼æ©Ÿå™¨å­¸ç¿’çš„å‹•æ…‹è·¯ç”±é¸æ“‡
2. **è³‡æºåˆ†é…**: è¡›æ˜Ÿè³‡æºçš„æœ€å„ªåˆ†é…ç­–ç•¥  
3. **å®‰å…¨æ€§**: SDN ç’°å¢ƒä¸‹çš„è¡›æ˜Ÿç¶²è·¯å®‰å…¨æ©Ÿåˆ¶

## ğŸ“ è¨±å¯è­‰

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸è¡“ç ”ç©¶å’Œæ•™è‚²ç”¨é€”ã€‚

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹é€²é€™å€‹æ¨¡æ“¬å™¨ã€‚

---

**æ³¨æ„**: é€™æ˜¯ä¸€å€‹æ¨¡æ“¬ç’°å¢ƒï¼Œç”¨æ–¼ç ”ç©¶å’Œæ•™è‚²ç›®çš„ã€‚å¯¦éš›çš„è¡›æ˜Ÿç¶²è·¯éƒ¨ç½²éœ€è¦è€ƒæ…®æ›´å¤šè¤‡é›œçš„ç‰©ç†å› ç´ å’Œå·¥ç¨‹å¯¦ç¾ç´°ç¯€ã€‚ 